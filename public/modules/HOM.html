<h1 id="topbar"></h1>
<div id="fixed">
  <div class="placeholder">
    You will be designing room-mate configurations. A room-mate configuration defines who lives in a house, and what their duties are. The statements on the left describe the world the room-mate configuration is designed for: these statements are always true and cannot be changed. There is an example on the right that shows what each statement means. Please read each statement/example carefully.
  </div>
  <ul>
    <li class="I">
        <div class="S">The room-mate configuration involves people, jobs, houses, and animals.</div>
        <div class="E">Example: Bob is a person. The grocery store is a job. Apartment A is a house. Mittens is an animal.</div>
    </li>
    <li class="I">
        <div class="S">A job is either a paying job or a chore.</div>
        <div class="E">Example: The grocery store is a paying job. Petcare is an unpaid chore.</div>
    </li>
    <li class="I">
        <div class="S">Only work can be done by people.</div>
        <div class="E">Example: Alice can work at the grocery store. Bob can work the petcare chore. Mittens cannot work.</div>
    </li>
    <li class="I">
        <div class="S">Only pets can be taken care of as a chore. There are no chores other than petcare.</div>
        <div class="E">Example: Bob can take care of Mittens. John cannot take care of Bill.</div>
    </li>
    <li class="I">
        <div class="S">Only people can be tenants of houses.</div>
        <div class="E">Example: Bob can be a tenant of apartment A. Mittens cannot be a tenant of apartment A.</div>
    </li>
    <li class="I">
        <div class="S">Only animals can be pets of houses.</div>
        <div class="E">Example: Fido can be a pet of apartment A. Bill cannot be a pet of apartment A.</div>
    </li>
  </ul>
  <div class="placeholder" id="understand">
    Understanding the each statement/example is crucial to complete the following puzzle: did they make sense to you?<br/>
    <button onclick='understand(false)'>I did not understand them. They did not make sense to me.</button>
    <button onclick='understand(true)'>Yes, they made sense. I am ready to read the puzzle.</button>
  </div>
</div>
<div id="free">
  <div class="placeholder" id="ready">An almost complete room-mate configuration has been designed below. The design satisfies some of the goals (green statements on the right), but not all of them (red ones). Each unsatisfied goal comes with an example of why it is unsatisfied by the current design. <b>The design is only one change away from satisfying all goals. Using the example as insight, make a single change to the solution that: 1. forbids the example 2. satisfies all the goals. Do you understand how to solve the puzzle? If you do not understand the instructions, you can return the HIT, or complete it and provide feedback at the end.</b><br/>
    <button onclick='ready(false)'>I am not ready. I do not understand what to do.</button>
    <button onclick='ready(true)'>Yes, I am prepared. I am ready to solve the puzzle.</button>
  </div>
  <div class="I">
    <ul class="S">
      <li>There is <select id="T1M"></select> work for each person.</li>
      <li>There is <select id="T2M"></select> employees at each job.</li>
      <li>There is <select id="T3M"></select> pet(s) taken care of for each chore.</li>
      <li>There is <select id="T4M"></select> tenant(s) in each house.</li>
      <li>There is <select id="T5M"></select> pet(s) in each house.</li>
      <li>For each person, <select id="T1R"></select> can be work.</li>
      <li>For each job, <select id="T2R"></select> can be employed.</li>
      <li>For each chore, <select id="T3R"></select> can be taken care of.</li>
      <li>For each house, <select id="T4R"></select> can be tenants.</li>
      <li>For each house, <select id="T5R"></select> can be pets.</li>
      <li>Each person working a job is employed by that job.</li>
      <li>All people live in a single house.</li>
      <li>All pets live in a single house.</li>
      <li>For each chore, pets can only be taken care of by the tenants of the same house.</li>
      <li>For each house, there exactly one person working a paying job.</li>
    </ul>
    <ul class="E">
      <li style="background-color:#afa" id="SAT">There can be a house with tenants and pets.</li>
      <li style="background-color:#afa" id="RENT">For every house, there is at least one tenant who works a paying job.</li>
      <div style="background-color:#faa">
        <li id="CARE">Every pet is taken care of as a chore for each house.</li> 
        Example of this failing: Whiskers is not taken care of as a chore for condo C.
        <ul>
          <li>Whiskers is a pet of condo C.</li>
          <li>Jimmy is a tenant of condo C.</li>
          <li>Jimmy works at the pharmacy.</li>
          <li>The pharmacy employs Jimmy.</li>
        </ul>
      </div>
    </ul>
  </div>
  <div class="placeholder" id="feedback"></div>
</div>

<script>
  function init2() {
    var edit = {};
    d3.select('#T1M')
    .html("<option disabled='disabled' selected='selected'>at least one</option> \
      <option id='T1Mset'>a set of</option> \
      <option id='T1Mlone'>at most one</option> \
      <option id='T1Mone'>exactly one</option>");
    edit.T1Mset = "#CARE, #RENT";
    edit.T1Mlone = "#CARE";
    edit.T1Mone = "#CARE, #RENT";
    d3.select('#T1R')
    .html("<option disabled='disabled' selected='selected'>all jobs</option> \
      <option id='T1R1'>jobs that are chores</option> \
      <option id='T1R2'>jobs that are not chores</option> \
      <option id='T1R3'>jobs that are paying jobs</option> \
      <option id='T1R4'>jobs that are not paying jobs</option>");
    edit.T1R1 = "#RENT, #SAT";
    edit.T1R2 = "#CARE";
    edit.T1R3 = "#CARE";
    edit.T1R4 = "#RENT, #SAT";
    d3.select('#T2M')
    .html("<option disabled='disabled' selected='selected'>exactly one</option> \
      <option id='T2Mlone'>at most one</option> \
      <option id='T2Mset'>a set of</option> \
      <option id='T2Msome'>at least one</option>");
    edit.T2Mlone = "#CARE";
    edit.T2Mset = "#CARE";
    edit.T2Msome = "#CARE";
    d3.select('#T2R')
    .html("<option disabled='disabled' selected='selected'>all people</option> \
      <option id='T2R1'>people who are not already employed</option>");
    edit.T2R1 = "#SAT";
    d3.select('#T3M')
    .html("<option disabled='disabled' selected='selected'>at least one</option> \
      <option id='T3Mlone'>at most one</option> \
      <option id='T3Mone'>exactly one</option> \
      <option id='T3Mset'>a set of</option>");
    edit.T3Mlone = "#CARE";
    edit.T3Mone = "#CARE";
    edit.T3Mset = "#CARE";
    d3.select('#T3R')
    .html("<option disabled='disabled' selected='selected'>all animals</option> \
      <option id='T3R1'>all animals who are not already taken care of</option>");
    edit.T3R1 = "#SAT";
    d3.select('#T4M')
    .html("<option disabled='disabled' selected='selected'>at least one</option> \
      <option id='T4Mset'>a set of</option> \
      <option id='T4Mlone'>at most one</option> \
      <option id='T4Mone'>exactly one</option> \
      <option id='T4Mtwo'>at least two</option>");
    edit.T4Mset = "#CARE";
    edit.T4Mlone = "#CARE";
    edit.T4Mone = "#CARE"; 
    edit.T4Mtwo = "";
    d3.select('#T4R')
    .html("<option disabled='disabled' selected='selected'>all people</option> \
      <option id='T4R1'>people who are not already tenants</option>");
    edit.T4R1 = "#SAT";
    d3.select('#T5M')
    .html("<option disabled='disabled' selected='selected'>at most one</option> \
      <option id='T5Mset'>a set of</option> \
      <option id='T5Mone'>exactly one</option> \
      <option id='T5Msome'>at least one</option>");
    edit.T5Mset = "#CARE";
    edit.T5Mone = "#CARE";
    edit.T5Msome = "#CARE";
    d3.select('#T5R')
    .html("<option disabled='disabled' selected='selected'>all animals</option> \
      <option id='T5R1'>animals that are not already pets</option>");
    edit.T5R1 = "#SAT";
    init(edit,"Given the failing example in red, did you realize it was possible for two tennants to successfully live together: one works a paying job and the other takes care of the pets?");
  }         
  init2();
</script>
