<h1 id="topbar"></h1>
<div id="fixed">
  <div class="placeholder">
    You will be designing a grading policy. A grading policy defines who can grade what assignments for particular classes. The statements on the left describe the world the grading policy is designed for: these statements are always true and cannot be changed. There is an example on the right that shows what each statement means. Please read each statement/example carefully.
  </div>
  <div class="S"><h3>Fixed Statements</h3></div>
  <div class="E"><h3>Examples of Statements</h3></div>
  <ul>
    <li class="I">
        <div class="S">The grading policy involves persons, classes and assignments.</div>
        <div class="E">&nbsp;</div>
    </li>
    <li class="I">
        <div class="S">A person is either a student or a professor.</div>
        <div class="E">Example: Bob is a student. Prof. Smith is a professor.</div>
    </li>
    <li class="I">
        <div class="S">Only professors can be instructors of classes.</div>
        <div class="E">Example: Bob cannot be an instructor for Art. Prof. Smith can be an instructor for Art.</div>
    </li>
    <li class="I">
        <div class="S">Only students can be assistants for classes.</div>
        <div class="E">Example: Bob can be an assistant for Physics. Prof. Smith cannot be an assistant for Physics.</div>
    </li>
    <li class="I">
        <div class="S">Only students can be enrolled in classes.</div>
        <div class="E">Example: Bob can be enrolled in History. Prof. Smith cannot be enrolled in History.</div>
    </li>
    <li class="I">
        <div class="S">Only classes can be associated with assignments.</div>
        <div class="E">Example: Physics can be associated with Homework#2.</div>
    </li>
    <li class="I">
        <div class="S">Only students can be assigned to assignments.</div>
        <div class="E">Example: Bob can be assigned Homework#2. Prof. Smith cannot be assigned Homework#2.</div>
    </li>
    <li class="I">
        <div class="S">Only instructors and assistants can grade assignments.</div>
        <div class="E">Example: Prof. Smith can grade Art assignments (if he is an instructor of Art). Bob can grade Art assignments (if he is an assistant for Art).</div>
    </li>
  </ul>
  <div class="placeholder" id="understand">
    Understanding the each statement/example is crucial to complete the following puzzle: did they make sense to you?<br/>
    <button onclick='understand(false)'>I did not understand them. They did not make sense to me.</button>
    <button onclick='understand(true)'>Yes, they made sense. I am ready to read the puzzle.</button>
  </div>
</div>
<div id="free">
  <div class="placeholder" id="ready">An almost complete grading policy has been designed below. The design satisfies some of the goals (green statements on the right), but not all of them (red ones). Each unsatisfied goal comes with an example of why it is unsatisfied by the current design.<br/>The design is only one change away from satisfying all goals. Using the example as insight, make a single change to the solution that: 1. forbids the example 2. satisfies all the goals. Do you understand how to solve the puzzle? If you do not understand the instructions, you can return the HIT, or complete it and provide feedback at the end.<br/>
    <button onclick='ready(false)'>I am not ready. I do not understand what to do.</button>
    <button onclick='ready(true)'>Yes, I am prepared. I am ready to solve the puzzle.</button>
  </div>
  <div class="S"><h3>Free Statements</h3></div>
  <div class="E"><h3>Goals and Examples of Statements+Goals Failing</h3></div>
  <div class="I">
    <ul class="S">
      <li>There is <select id="T1M"></select> instructor(s) of each class.</li>
      <li>There is <select id="T2M"></select> assistant(s) for each class.</li>
      <li>There is <select id="T3M"></select> student(s) enrolled in each class.</li>
      <li>There is <select id="T4M"></select> class(es) associated with each assignment.</li>
      <li>There is <select id="T5M"></select> student(s) assigned to each assignment.</li>
      <li>For each class, <select id="T1R"></select> can be instructors.</li>
      <li>For each class, <select id="T2R"></select> can be assistants.</li>
      <li>For each class, <select id="T3R"></select> can be enrolled.</li>
      <li>For each assignment, <select id="T4R"></select> can be associated with it.</li>
      <li>For each assignment, <select id="T5R"></select> can be assigned to it.</li>
    </ul>
    <ul class="E">
      <li style="background-color:#afa" id="SAT">There can be at least one class, assignment, and person.</li>
      <li style="background-color:#afa" id="T1L1">There is exactly one instructor of each class.</li>
      <li style="background-color:#afa" id="T4L1">There is exactly one class associated with each assignment.</li> 
      <li style="background-color:#afa" id="T5L1">There is at least one student assigned to each assignment.</li>
      <div style="background-color:#faa">
        <li id="A">There is no student who can grade an assignment they are assigned to.</li> 
        <b>Example of this failing: Alice can grade Homework#1, which they are assigned to.
        <ul>
          <li>Alice is an assistant for Calculus.</li>
          <li>Bob is an assistant for Calculus.</li>
          <li>John is an assistant for Art.</li>
          <li>Prof. Ward is the instructor of Calculus.</li>
          <li>Prof. Hughes is the instructor of Art.</li>
          <li>Calculus is associated with Homework#1.</li>
          <li>Homework#1 is assigned to Alice.</li>
          <li>Alice is enrolled in Calculus.</li>
          <li>Bob is enrolled in Calculus.</li>
          <li>John is enrolled in Art.</li>
        </ul></b>
      </div>
    </ul>
  </div>
  <div class="placeholder" id="feedback"></div>
</div>

<script>
  function init2() {
    var edit = {};
    d3.select('#T1M')
    .html("<option disabled='disabled' selected='selected'>exactly one</option> \
      <option id='T1Mset'>a set of</option> \
      <option id='T1Mlone'>at most one</option> \
      <option id='T1Msome'>at least one</option>");
    edit.T1Mset = "#A,#T1L1";
    edit.T1Mlone = "#A,#T1L1";
    edit.T1Msome = "#A,#T1L1";
    d3.select('#T1R')
    .html("<option disabled='disabled' selected='selected'>all professors</option> \
      <option id='T1R1'>professors that are not instructor of a class</option>");
    edit.T1R1 = "#SAT";
    d3.select('#T2M')
    .html("<option disabled='disabled' selected='selected'>a set of</option> \
      <option id='T2Mlone'>at most one</option> \
      <option id='T2Mone'>exactly one</option> \
      <option id='T2Msome'>at least one</option>");
    edit.T2Mlone = "#A";
    edit.T2Mone = "#A";
    edit.T2Msome = "#A";
    d3.select('#T2R')
    .html("<option disabled='disabled' selected='selected'>all students</option> \
      <option id='T2R1'>students who are assistants</option> \
      <option id='T2R2'>students who are not assistants</option> \
      <option id='T2R3'>students who are enrolled</option> \
      <option id='T2R4'>students who are not enrolled</option>");
    edit.T2R1 = "#A";
    edit.T2R2 = "#SAT";
    edit.T2R3 = "#A";
    edit.T2R4 = "";
    d3.select('#T3M')
    .html("<option disabled='disabled' selected='selected'>a set of</option> \
      <option id='T3Mlone'>at most one</option> \
      <option id='T3Mone'>exactly one</option> \
      <option id='T3Msome'>at least one</option>");
    edit.T3Mlone = "#A";
    edit.T3Mone = "#A";
    edit.T3Msome = "#A";
    d3.select('#T3R')
    .html("<option disabled='disabled' selected='selected'>all students</option> \
      <option id='T3R1'>students who are enrolled</option> \
      <option id='T3R2'>students who are not enrolled</option> \
      <option id='T3R3'>students who are assistants</option> \
      <option id='T3R4'>students who are not assistants</option>");
    edit.T3R1 = "#A";
    edit.T3R2 = "#SAT";
    edit.T3R3 = "#A";
    edit.T3R4 = "";
    d3.select('#T4M')
    .html("<option disabled='disabled' selected='selected'>exactly one</option> \
      <option id='T4Mset'>a set of</option> \
      <option id='T4Mlone'>at most one</option> \
      <option id='T4Msome'>at least one</option>");
    edit.T4Mset = "#A,#T4L1";
    edit.T4Msome = "#A,#T4L1";
    edit.T4Mlone = "#A"; 
    d3.select('#T4R')
    .html("<option disabled='disabled' selected='selected'>all classes</option> \
      <option id='T4R1'>classes that are not associated with an assignment</option>");
    edit.T4R1 = "#SAT";
    d3.select('#T5M')
    .html("<option disabled='disabled' selected='selected'>at least one</option> \
      <option id='T5Mset'>a set of</option> \
      <option id='T5Mone'>exactly one</option> \
      <option id='T5Mlone'>at most one</option>");
    edit.T5Mset = "#A,#T5L1";
    edit.T5Mone = "#A";
    edit.T5Mlone = "#A,#T5L1";
    d3.select('#T5R')
    .html("<option disabled='disabled' selected='selected'>all students</option> \
      <option id='T5R1'>students who are enrolled in the class</option> \
      <option id='T5R2'>students who are not enrolled in the class</option> \
      <option id='T5R3'>students who are assistants in the class</option> \
      <option id='T5R4'>students who are not assistants in the class</option>");
    edit.T5R1 = "#A";
    edit.T5R2 = "#SAT";
    edit.T5R3 = "#A";
    edit.T5R4 = "";
    init(edit, "Given the failing example in red, did you think it is possible for student to be enrolled in and an assistant for the same class?");
  }         
  init2();
</script>
