<div>
  <h1>
    Thank you again for your participation and providing feedback below.
    <strong>Your feedback below will not affect your approval. You will be paid regardless of your answers.</strong>
  </h1>
</div>

<div>
    What is your most used programming language?<br/>
    Did you have any issues with the survey?<br/>
    <textarea id="q1" rows="1" cols="60"></textarea>
</div>

<div>
  <button id="submitComments" type="button">Submit</button>
  <h1>Please copy and paste the following code back on Mechanical Turk before closing this window:</h1>
  <h2 id="postId">Please submit comments first</h2>
</div>

<script>
var postId  = experimentr.postId
    , data  = {}
    , valid = false

function validate() {
  var q1 = d3.select("#q1").property("value");
  if(/\S/.test(q1)) data['q1'] = q1;
  
  valid = data['q1']!=null;
  if( valid ) {
    data.finished = true;
    experimentr.addData(data);
    d3.select('#submitComments').attr('disabled', 'true');
    d3.select('#submitFeedback').text('Submit Successful');
    d3.select("#postId").text(postId);
  }
}

function init2() {
  d3.select('#submitComments').on('click', validate);
}
init2();
</script>
