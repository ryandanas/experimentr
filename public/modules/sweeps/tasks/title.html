<h1 id="topbar"></h1>

<h3>Instructions</h3>

<div id="description" class="placeholder I">
Please read the function description carefully. When you feel you understand the function description well enough, please fill in the test case templates below with your choice of input and expected output. You cannot proceed until all inputs/outputs marked with (**) are filled in.
</div>

<h3>Function Description</h3>
<div class="I">
<center>
<big>
<i>string</i><b>title</b>(<i>string</i> text) 
</big>
</center>
<p>
The title function takes in a string (text) and returns the substring of text up to the first period.
</p>
</div>

<h3>Test Case Templates</h3>
<div class="I">
    <b>title</b>(
    <textarea disabled="true" rows="1" cols="20">“Mr. Anderson”</textarea>
    ) =
    <textarea disabled="true" rows="1" cols="20">“Mr.”</textarea>
</div>
<div id="test0" class="I">
    <b>title</b>(
    <textarea id="input0_1" disabled="true" rows="1" cols="20">“Dr. Kelvin”</textarea>
    ) =
    *<textarea id="output0" rows="1" cols="20"></textarea>*
</div>
<div id="test1" class="I">
    <b>title</b>(
    *<textarea id="input1_1" rows="1" cols="20"></textarea>*
    ) =
    <textarea id="output1" rows="1" cols="20"></textarea>
</div>
<div id="test2" class="I">
    <b>title</b>(
    *<textarea id="input2_1" rows="1" cols="20"></textarea>*
    ) =
    <textarea id="output2" rows="1" cols="20"></textarea>
</div>
<div id="test3" class="I">
    <b>title</b>(
    *<textarea id="input3_1" rows="1" cols="20"></textarea>*
    ) =
    <textarea id="output3" rows="1" cols="20"></textarea>
</div>
<div id="test4" class="I">
    <b>title</b>(
    <textarea id="input4_1" rows="1" cols="20"></textarea>
    ) =
    <textarea id="output4" rows="1" cols="20"></textarea>
</div>
<div id="test5" class="I">
    <b>title</b>(
    <textarea id="input5_1" rows="1" cols="20"></textarea>
    ) =
    <textarea id="output5" rows="1" cols="20"></textarea>
</div>

<button id="continue" type="button">Next Task</button>

<script>
  function textareainput() {
    validate(d3.event.target.id);
  }
  var vdic = {};
  function validate(usertarget) {
    try {
      if(tovalidate.includes(usertarget)) {
        var uservalue = JSON.parse(d3.select("#"+usertarget).property("value"));
        if(isvalid(uservalue)) {
          d3.select("#"+usertarget).attr("style","background-color:#afa");
          vdic[usertarget] = true;
        } else {
          d3.select("#"+usertarget).attr("style","background-color:#faa");
          vdic[usertarget] = false;
        }
      }
    } catch (e) {
      d3.select("#"+usertarget).attr("style","background-color:#faa");
      vdic[usertarget] = false;
    }
    var valid = true;
    for (var key in vdic) {
      valid = valid && vdic[key];
    }
    if(valid) {
      d3.select("#continue").style('display', null);
    } else {
      d3.select("#continue").style('display', 'none');
    }
  }
  //
  function submit() {
    d3.selectAll("textarea").attr("disabled", "true");
    for (var i of [0,1,2,3,4,5]) {
      var test = "test"+i;
      var input1 = "input"+i+"_1";
      var output = "output"+i;
      data[taskID+"_"+test] = [
      d3.select("#"+input1).property("value"),
      d3.select("#"+output).property("value")];
    }
    done();
  }
  var tovalidate = ["output0",
  "input1_1",
  "input2_1",
  "input3_1"];
  function isvalid(uservalue) {
    return typeof uservalue === 'string';
  }
  //
  init();
  d3.select("#continue").on("click", submit);
  d3.selectAll("textarea").on("input", textareainput);
  for(var i of tovalidate) {
    validate(i);
  }
</script>
