<div id="specification">
	<h1>Specification</h1>
  <div id="spec">
  	<p>We consider 3 classes: <b>Persons, Departments, and Salaries.</b></p>
  	<p>The class of <b>Persons</b> is partitioned into 2 non-overlapping subclasses: <b>Employees, and Bosses.</b></p>
  	<p>We make the following assumptions:
  		<ol>
  			<li>For each <b>Department</b> there is <span id="ab1">a single</span> <b>Boss</b> who is the <i>head_of</i> it.</li>
  			<li>For each <b>Department</b> there is <span id="ab2">a set of</span> <b>Employees</b> who are the <i>managers_for</i> it.</li>
  			<li>For each <b>Salary</b> there is <span id="ab3">a single</span> <b>Department</b> <i>associated_with</i> it.</li>
  			<li>For each <b>Salary</b> there is <span id="ab4">a set of</span> <b>Employees</b> <i>assigned_to</i> it.</li>
  			<li>A <b>Person</b> <i>can_raise</i> a <b>Salary</b> only if either <span id="ab5a">the <b>Person</b> is a <i>manager_for</i> the <b>Department</b> <i>associated_with</i> the <b>Salary</b></span> <span id="ab5b">or</span><span id="ab5c"> the <b>Person</b> is the <b>Boss</b> who is the <i>head_of</i> that <b>Department</b>.</span></li>
  		</ol>
  	</p>
  </div>
</div>
<div id="assertion">
	<h1>Assertion</h1>
  <div id="assert">
  	Here is the assertion that we thought would be true:
  	<p>There cannot exist a <b>Person</b> who <i>can_raise</i> a <b>Salary</b> <i>assigned_to</i> them.</p>
  </div>
</div>
<div id="scenarios">
	<h1>Counterexamples</h1>
	<div style="text-align:center;">
		<button id="prev">prev</button>
		<span id="num">0</span>
		<span>of</span>
		<span id="all">3</span>
		<button id="next">next</button>
	</div>
	<div id="scenario">
		<div id="s1" style="display:none;">
			<ul>
				<li><b>Employee1</b> is a <i>manager_for</i> <b>Department0</b>.</li>
        <li><b>Employee2</b> is a <i>manager_for</i> <b>Department0</b>.</li>
				<li><b>Boss0</b> is the <i>head_of</i> <b>Department0</b>.</li>
				<li><b>Salary0</b> is <i>associated_with</i> <b>Department0</b>.</li>
        <li><b>Salary0</b> is <i>assigned_to</i> <b>Employee1</b>.</li>
			</ul>
			One way to see the failure of the assertion: <b>Employee1</b> <i>can_raise</i> <b>Salary0</b>.
		</div>
    <div id="s2" style="display:none;">
      <ul>
        <li><b>Employee0</b> is a <i>manager_for</i> <b>Department0</b>.</li>
        <li><b>Employee1</b> is a <i>manager_for</i> <b>Department0</b>.</li>
        <li><b>Boss0</b> is the <i>head_of</i> <b>Department0</b>.</li>
        <li><b>Salary0</b> is <i>associated_with</i> <b>Department0</b>.</li>
        <li><b>Salary0</b> is <i>assigned_to</i> <b>Employee0</b>.</li>
        <li><b>Salary0</b> is <i>assigned_to</i> <b>Employee1</b>.</li>
        <li><b>Salary0</b> is <i>assigned_to</i> <b>Employee0</b>.</li>
        <li><b>Salary0</b> is <i>assigned_to</i> <b>Employee1</b>.</li>
      </ul>
      One way to see the failure of the assertion: <b>Employee1</b> <i>can_raise</i> <b>Salary0</b>.
    </div>
    <div id="s3" style="display:none;">
      <ul>
        <li><b>Salary0</b> is <i>assigned_to</i> <b>Employee0</b>.</li>
        <li><b>Salary0</b> is <i>assigned_to</i> <b>Employee1</b>.</li>
      </ul>
      One way to see the failure of the assertion: <b>Employee1</b> <i>can_raise</i> <b>Salary0</b>.
    </div>
	</div>
</div>
<div id="question">
	<h1>Question</h1>
  <div id="quest">
  	<p>Please select the part of the specification that, if changed, would make the assertion true.</p>
  	<div style="text-align:center;">
  		<button id="b1">1</button>
  		<button id="b2">2</button>
  		<button id="b3">3</button>
  		<button id="b4">4</button>
  		<button id="b5a">5a</button>
      <button id="b5b">5b</button>
      <button id="b5c">5c</button>
  	</div>
	  <p id="feedback"></p>
  </div>
</div>

<style>
#specification, #assertion, #question, #scenarios {
    border: 1px solid #AAA;
    border-radius: 5px;
    padding: 5px;
    margin-top: 5px;
    margin-right: 5px;
    background: #CCC;
}
#spec, #assert, #quest, #scenario {
  border: 1px solid #AAA;
  border-radius: 5px;
  padding: 5px;
  background: #FFF;
}
#specification {
	width: 55%;
	float:left;
}
#assertion{
	width: 40%;
	float: right;
}
#question{
	width: 55%;
	float: left;	
}
#scenarios {
	width: 40%;
	float: right;
}
</style>

<script>
  function init() {
    experimentr.hideNext();
    next();
    d3.select('#prev').on('click', prev);
    d3.select('#next').on('click', next)
    d3.selectAll('button').on('mouseover', fizz);
    d3.selectAll('button').on('mouseout', buzz);
    d3.select('#b1').on('click', foo);
    d3.select('#b2').on('click', foo);
    d3.select('#b3').on('click', foo);
    d3.select('#b4').on('click', foo);
    d3.select('#b5a').on('click', bar);
    d3.select('#b5b').on('click', foo);
    d3.select('#b5c').on('click', foo);
  }
  function prev() {
  	var num = Number(d3.select('#num').text());
  	if(num > 1) {
  		d3.select('#s'+num).style('display', 'none');
  		num--;
  		d3.select('#s'+num).style('display', null);
  		d3.select('#num').text(""+num);
  	}
  }
  function next() {
  	var num = Number(d3.select('#num').text());
  	var all = Number(d3.select('#all').text());
  	if(num < all) {
  		d3.select('#s'+num).style('display', 'none');
  		num++;
  		d3.select('#s'+num).style('display', null);
  		d3.select('#num').text(""+num);
  	}
  }
  function fizz() {
  	d3.select('#a'+d3.event.target.id).style("background-color", "#FFA");
  }
  function buzz() {
  	d3.select('#a'+d3.event.target.id).style("background-color", null);
  }
  function foo() {
  	d3.select('#feedback').text("Your selection is not the part of the specification that requires changes. Please try again.");
  	d3.select('#'+d3.event.target.id).attr("disabled", true);
  	d3.select('#'+d3.event.target.id).style("background-color", "#FAA");
  	d3.select('#a'+d3.event.target.id).style("background-color", "#FAA");
  }
  function bar() {
  	d3.select('#feedback').text("Correct! Press next to proceed to the next situation.")
  	d3.select('#'+d3.event.target.id).attr("disabled", true);
  	d3.selectAll('button').attr("disabled", true);
  	d3.select('#'+d3.event.target.id).style("background-color", "#AFA");
  	d3.select('#a'+d3.event.target.id).style("background-color", "#AFA");
  	experimentr.showNext();
  	d3.select('#next-button').attr('disabled', null);
  }
  init();
</script>