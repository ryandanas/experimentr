<div id="debrief">
  <h1>
    Thank you again for your participation and providing feedback below.
    <strong>Your feedback below will not affect your approval. You will be paid regardless of your answers.</strong>
  </h1>

  <p>How many puzzles did you solve by randomly trying all the options?<input id="q1" type="number" min="0"/></p>

  <p>Totalled across every puzzle, about how many of your answers were guesses? <input id="q2" type="number" min="0"/></p>

  <p>
    How helpful were the examples for solving the puzzles?
    <select id="q3">
      <option disabled='disabled' selected='selected'></option> 
      <option>Not at all helpful</option> 
      <option>A little helpful</option> 
      <option>Somewhat helpful</option>
      <option>Very helpful</option>
      <option>Extremely helpful</option>
    </select>
  </p>

  <div>
    Was there a choice you made that you thought was correct, and you were suprised to find out it was wrong? If yes, explain why you were suprised.
    <textarea id="q4" rows="10" cols="40"></textarea>
  </div>

  <div>
    Was there something you struggled with in this study? Is there something we could add that would have made the study easier to complete?
    <textarea id="q5" rows="10" cols="40"></textarea>
  </div>

  <p>
    How helpful was the blue hover highlighting between the example, goals and partial solution for solving the puzzles?
    <select id="q6">
      <option disabled='disabled' selected='selected'></option> 
      <option>Not at all helpful</option> 
      <option>A little helpful</option> 
      <option>Somewhat helpful</option>
      <option>Very helpful</option>
      <option>Extremely helpful</option>
    </select>
  </p>

  <p>
    How helpful was the initial walkthrough in understanding how to approach the puzzles and make them easier to solve?
    <select id="q7">
      <option disabled='disabled' selected='selected'></option> 
      <option>Not at all helpful</option> 
      <option>A little helpful</option> 
      <option>Somewhat helpful</option>
      <option>Very helpful</option>
      <option>Extremely helpful</option>
    </select>
  </p>

  <br>
  <button id="submitComments" type="button">Submit</button>
  <div id="submitFeedback"></div>
  <h1>Please copy and paste the following code back on Mechanical Turk before closing this window:</h1>
  <h2 id="postId">Please submit comments first</h2>
</div>

<style>
</style>

<script>
var postId  = experimentr.postId
    , data  = {}
    , valid = false

function validate() {
    var q1 = parseInt(d3.select("#q1").property("value"), 10);
    if(q1!=NaN) data['q1'] = q1;

    var q2 = parseInt(d3.select("#q2").property("value"), 10);
    if(q2!=NaN) data['q2'] = q2;

    var q3 = d3.select("#q3").property("value");
    if(q3!="") data['q3'] = q3;

    var q4 = d3.select("#q4").property("value");
    if(q4!="") data['q4'] = q4;

    var q5 = d3.select("#q5").property("value"); 
    if(q5!="") data['q5'] = q5;

    var q6 = d3.select("#q6").property("value");
    if(q6!="") data['q6'] = q6;

    var q7 = d3.select("#q7").property("value");
    if(q7!="") data['q7'] = q7;

    valid = data['q1']!=null && data['q2']!=null && data['q3']!=null && data['q4']!=null && data['q5']!=null && data['q6']!=null && data['q7']!=null;
    if( valid ) {
      data.finished = true;
      experimentr.addData(data);
      d3.select('#submitComments').attr('disabled', 'true');
      d3.select('#submitFeedback').text('Submit Successful');
      d3.select("#postId").text(postId);
    }
    else {
      d3.select('#submitFeedback').text('Please answer all questions before submitting.');
    }
  }

function init2() {
  d3.select('#submitComments').on('click', validate);
}
init2();
</script>
