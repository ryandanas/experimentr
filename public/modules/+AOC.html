<div id="specification">
	<h1>Specification</h1>
  <div id="spec">
  </div>
</div>
<div id="question">
  <h1>Question</h1>
  <div id="quest">
    <p>Please edit the specification to make the assertion true, and have your answer checked.</p>
    <div style="text-align:center;">
      <button id="run">Check Specification</button>
    </div>
    <p>Attempts Remaining: <span id="attempts"></span>.</p>
    <p>Status: <span id="status"></span>.</p>
  </div>
</div>
<div id="scenarios">
	<h1>Counterexample</h1>
	<div id="scenario">
	</div>
</div>
<div id="assertion">
  <h1>Assertion</h1>
    <div id="assert">
    </div>
</div>
<div id="feedback" style="display:none;">
  <h1>Feedback</h1>
  <p>Why did you make your edits? How did you use the scenario output?</p>
  <textarea id="comment"></textarea>
  <button id="done">Submit</button>
</div>

<script>
var tid = "+AOC";
/* SPEC */
  var specCM = CodeMirror(d3.select("#spec")[0][0], {
    value: 
"abstract sig Target { }\n\
sig Addr extends Target { }\n\
sig Name extends Target { }\n\
\n\
sig Book {\n\
\tentry_in: set Name,\n\
\ttarget_of: entry_in->lone Target\n\
} {\n\
\tno n: Name | n in lookup[n]\n\
\tall n,l: Name | l in lookup[n] implies l in entry_in\n\
}",
lineNumbers: true,
lineWrapping:true,
    mode: "text/x-java"
  });
/* ASSERT */
  var assertCM = CodeMirror(d3.select("#assert")[0][0], {
    value:
"fun lookup [b: Book, n: Name] : set Target { n.^(b.target_of)}\n\
\n\
assert lookupYields {\n\
\tall b: Book, n: b.entry_in | some (lookup [b,n] & Addr)\n\
}\n\
\n\
check lookupYields",
lineWrapping:true,
mode : "text/x-java",
readOnly: true 
  });
/* SCENARIOS */
var scenarioCM = CodeMirror(d3.select("#scenario")[0][0], {
    value: "",
    lineWrapping:true,
    mode : "text/x-java",
    readOnly: true 
  });
init(tid);
document.onkeyup = function(e) { 
  e = e|| window.event;
  userevent(tid, specCM.getValue()) ;
};
d3.select('#done').on('click', finish);
function finish(e){
  done(tid, d3.select("#comment").text);
}
</script>
