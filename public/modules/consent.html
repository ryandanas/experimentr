<div id="consent">

<h2 class="placeholder">Counterexample and Spec Tracing</h2>

<p class="placeholder">
  The experiment will have you complete several specification tracing tasks. In each task you will see an alloy specification, an assertion intended to be true about the specification, and some counterexamples: scenarios that show why the assertion is not true. You will be asked to point out the part of the specification that, if changed, would make the assertion true.<br/>
  If you have any questions, concerns, or frustratons, you'll be able to let us know at the end of the experiment.
</p>

<p>
Please enter your Brown student ID: 
<br>

<input type="text" id="workerId" name="workerId" disabled="true" size="30" />
<button id="checkId" type="button">checkId</button>
<br>

<span id="invalidMessage">
Our records show that you have taken part in this study before, so we cannot allow you to take this HIT again at this time. Please contact us if you feel this is in error.
</span>
</p>

<p>
<strong>Note: this experiment requires a modern browser. If you are not using Chrome or Firefox, the "I Agree" button may not activate even after entering your student id.</strong>
</p>

</div>

<style>
  #invalidMessage {
    display: none;
    color: red;
  }
  #consentForm {
    border: 1px solid #ccc;
    border-radius: 5px;
    height: 200px;
    overflow-y: scroll;
    padding: 15px;
  }
</style>

<script>
(function() {
  var data    = {}
    , workers = null;

  init();

  function init() {
    experimentr.hideNext();

    // load previous workers file
    d3.json('modules/blocked-workers.json', function(err, d) {
      workers = d;
      d3.select('#workerId').attr('disabled', null);
    });

    d3.selectAll('#workerId')
      .on('keypress', function() { data.workerId = this.value; })
      .on('blur', function() { data.workerId = this.value; });

    d3.select('#checkId').on('click', validate);
  }

  function validate() {
    if( data.workerId ) {
      experimentr.addData(data);
      experimentr.next();
  }
}

}());
</script>
